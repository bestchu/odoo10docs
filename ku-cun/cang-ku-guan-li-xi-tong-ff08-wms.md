## **仓库管理系统（WMS）**

Odoo 的仓库系统简单、灵活且功能完善。它基于会计复式记账。其理念是“没有丢失，只有转库位”。就是说，没有丢失、消耗或者损失产品，产品只会从一个库位转移到另一个库位。Odoo的1每一个业务（比如采购收货、销售发货、盘盈盘亏库存、原材料的消耗）都是由一个库位转到另一个库位。

### 一,**仓库产品的设置**

#### 1,** 产品分类**

不像联系人分类和属于其分类的联系人，产品分类对属于其分类的产品是有影响的，并且一个产品可能只属 于一个分类。通过菜单“库存→配置→产品→产品分类”，点击“创建”来得到一个定义产品分类的窗体。

![](/assets/QQ截图20180320101818.png)

输入名称并选择了上级类别后，你会注意到其它的字段，特别是在科目属性一节，被自动填入了收入科目和费用科目的值。这些值都会影响到产品。一个产品的相关字段如果在窗体保存时为空，则会被赋予默认值（默认值为上级类别中的科目设置）。最后点击“保存”。

产品分类定义好后，你可以在产品窗体的“库存”选项卡中选择此产品的内部分类。

#### 2,**  定义产品（物料编码）**

点击菜单“库存→库存管理→产品”，然后点击”新建”按钮来定义一个新的产品

![](/assets/QQ截图20180320172425.png)

图主窗体和“一般信息”选项卡

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps88E6.tmp.png)

图“库存”选项卡

在新建产品时有下面三个重要的设置：

&gt;&gt;产品类型

&gt;&gt;补货方式

&gt;&gt;供货方式

#### 3,**  产品类型**

![](/assets/QQ截图20180320114307.png)

产品类型在信息选项卡中设置，它定义了产品是否需要进行库存管理，是否由系统管理它的补货方式。下面为三种不同的产品类型：

&gt;&gt;可库存产品：该产品库存被系统管理，并可以根据定义的补货规则，依据库存量或订单数量自动进行补货。

&gt;&gt;可消耗：该产品的库存被系统管理，你可以接收、转移和制造它。但它的补货不被系统管理，系统总是假设此类产品在任何时间内仓库中都有足够的数量，所以它不被自动补货。

&gt;&gt;服务：它不出现在任何仓库操作中。例如：咨询服务。在 Odoo中，服务是一种特殊的产品。在产品窗体中设置“跟踪服务”字段为“创建任务并跟踪计时”，并在项目字段中选择此服务所属的项目，那么，当此产品的销售订单确认后，Odoo在将自动在相关项目中新建一个任务来提供此服务（要实现自动创建任务的功能，你还需要在项目管理设置“ 从销售订单创建任务 ”）。

#### 4**, 供货方式**

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsC06F.tmp.png)

Odoo 支持的两种供货方式：

&gt;&gt;采购：产品从供应商处采购

&gt;&gt;生产：使用内部资源生产这个产品或提供这个服务

对于一个产品，要么内部生产，要么从供应商处采购。

当新建一个产品时，其产品类型、补货方式、供货方式是你必须要考虑的。为了满足客户订单或生产单，系统将根据它们的设置产生不同的文件。

注：如果产品的供货方式为采购，那你必须在产品窗体的“补货”选项卡中输入此产品的供应商，否则 Odoo在自动生成采购单时会出错。

注：解决补货异常

虽然创建了生产或者采购计划，但是在系统中找不到相应的补货单。这可能是触发了严重的错误（例如：你是否忘记给产品设置供应商）。当系统找不到一个满足补货的途径时，会触发一个补货异常。通过菜单“库→报表→补货异常”，可以显示存在问题的补货单。你可以在修复了错误后，再次运行 mrp运算。![](/assets/QQ截图20180320164516.png)

#### 5,**  补货方式**

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsD4AB.tmp.png)

补货方式在“库存”选项卡中设置，它决定了该产品如何补充：

**&gt;&gt;按订单补货（MTO）：**当一个客户的订单被确认后，系统就按照这个订单自动生成采购单或生产单来采购或生产产品。按照订单补货常用于样品、非常昂贵或者备货时间短的产品。“按订单生产”并不会改变你的库存，因为它是按订单的确切数量来补货的。

**&gt;&gt;按库存补货（MTS）：**产品从现有的仓库提供给客户。当其库存太低时，依据补货规则，系统自动产生补货单为每个产品补充到一定数量。按库存补货通常用于需求量大或者可以预测市场需求的产品。当未勾选按订单补货时，系统默认为按库存方式补货。

##### 5.1**  **重订货规则

当你采用按库存补货时，你需要通过菜单“仓库→库存管理→重订货规则” 来为此产品进行补货规则的设置，包括产品库存的最小数量和允许的最大数量

规则如下：如果仓库中某个库位的库存数量小于最小库存量，系统将自动开出一个补货单（其数量为补货基数的倍数），以提高系统库存到再订购规则允许的最大数量。数量倍数的设置与包装和运输方式有关。如每个包装为两个产品或每次发运为两个产品，则数量倍数设为 2。

在重订货规则中，当你指定一个仓库后，默认库位为仓库的库存库位，你可以修改它。

图：重订货规则

![](/assets/QQ截图20180321173318.png)

重订货规则不单指从供应商处购买。如果产品的供货方法为生产，系统将生产一个生产单而不是采购单。对于产品的供应商，你也可以设置此产品的最少采购量，需要补货时，系统会根据最少采购量和补货基数，自动向上圆整数据。

![](/assets/QQ截图20180327152149.png)

需要注意的是，这个规则是基于虚拟库存的数量，它包含了即将发货的订单数量和即将入库的采购单数量，而不只是真实的数量，所以最小数量和最大数量并不是仓库里实际的最小数量和最大数量。

例如：一个公司仓库设置的最小数量是 10，最大数量是30，数量倍数是12。假设当前库存为0，如果来了2个产品的订单，将产生一个数量为32的采购单，那么，在向客户发货前，仓库里将有32个产品。

规则设置完成后，采购经理只需使用菜单中的“采购→采购→询价单”，同供应商确认里面的由 Odoo自动生成的采购单草稿就可以了。

##### 5**.2  按订单补货，同时考虑当前库存**

如果产品的补货方式为按订单，则产品的现有库存将不被考虑。即便库存中有足够的产品，系统也需要采购或生产和订单数量相同的产品。

如果要考虑到现有库存，同时又按订单采购。则可以采用一种变通的方法，即将补货方式设置为按库存补货，同时在再订购规则中将最小数量和最大数量都设为0。

#### 6.** 计量单位**

Odoo 支持多计量单位。一种产品可同时使用多种单位来表示。例如，你采购打印纸的时候使用箱作单位，但生产领用时用包作为单位，而在统计用量时用张做单位。你需要确定表述产品所有的计量单位都属于一个计量分类。如果一个产品属于重量类型，你可以使用公斤、吨或者克，但你不能用小时来描述它，因为它们不是一个单位分类。

注：计量单位的类别

所有同一类的计量单位是可以互相转换的。

下面的表格列出了一些单位和单位分类的例子。只要它们属于一个单位分类，就能按照比率转换。

表：纸张计量单位示例

| 产品单位 | 单位分类 | 比例 | 单位比较 |
| :--- | :--- | :--- | :--- |
| 张 | 件 | 1 | 参考单位 |
| 包 | 件 | 500 | 较大 |
| 箱 | 件 | 5000 | 较大 |

表：重量计量单位示例

| 产品单位 | 单位分类 | 比例 | 单位比较 |
| :--- | :--- | :--- | :--- |
| 公斤 | 重量 | 1 | 参考单位 |
| 克 | 重量 | 0.001 | 较小 |
| 吨 | 重量 | 1000 | 较大 |

要创建新的计量单位，首先要通过“设置→仓库”，在“库位和仓库”的产品一节勾选“管理产品的不同计量单位”。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps9224.tmp.png)

然后使用菜单“库存→配置→计量单位”，点击“新建”按钮。

在定义新的计量单位时，你要设置一个单位转换后数量如何舍入的舍入精度，数值 1 的舍入精度为1，数值3.05的舍入精度为0.01。

![](/assets/QQ截图20180323115046.png)

你可以为一个产品设定一个销售单位和一个采购单位。

只要单位为同一单位类型，对于产品的每一个操作你都可以使用不同单位，。如果你使用了其它单位，系统会自动转换价格和数量。

例如，如果你有 13 包单价为20元/包的打印纸,如果你想按箱（10包每箱）出售，系统会自动转为1.3箱，200元/箱。如果你设定箱的精度为1，系统将显示你只有1箱的打印纸。

注：第二个单位

Odoo 支持双计量单位。当你使用时，整个仓库管理系统被用两个单位编码，所以它们之间没有真正的联系。

这样做在农业产业非常有用，例如：火腿按照块来卖，但付钱时按公斤来称。

为了激活可选的双计量单位管理功能，使用菜单“设置→用户”，然后在用户的访问权限选项卡中的“技术设置”一节勾选“管理第二个计量单位”。

#### 7.**  收货提前期、质保期和交货周期**

系统支持三种周期：

&gt;&gt;收货提前期：从供应商采购产品从订单确认到仓库收货所需要的时间。这个提前期在产品窗体的供应商一栏设置。

![](/assets/QQ截图20180323115434.png)

&gt;&gt;质保期:设备免费质保的时间，质保期在产品窗体的“销售”选项卡中设置。其中保修期用于维修设备和售后服务。

&gt;&gt;交货周期：从接收订单到交付货物给客户的时间，在产品窗体的“销售”选项卡中设置。

#### 8.**  产品变体**

在 Odoo 中，对于只有细微差别的产品，你可以采用属性管理。

为使用此功能，需要通过“库存→配置→设置”，在“产品”一节的“产品变体”字段，点选“ 产品可以有好几个属性，通过不同属性来定义不同的产品变体 ”。

![](/assets/QQ截图20180323115829.png)

例如：《Odoo 应用手册》有两种语言：中文简体和中文繁体，另外还有两种打印类型：彩色和黑白。

语言、打印样式等都属于属性，中文简体和中文繁体值、彩色和黑白属于属性值。

首先你要通过“仓库→配置→产品→属性”来录入产品要使用的属性，如果你安装了“website\_sale”模块儿，你可以选择属性的类型。

![](/assets/QQ截图20180327162428.png)

属性录入完毕后，你需要通过“仓库→配置→产品→属性值”来录入各属性可能的属性值。

![](/assets/QQ截图20180327163651.png)

对于属性类型为颜色的属性值，请为属性值输入“HTML颜色索引”。

最后你可以在产品窗体的“产品属性”选项卡中点击“添加一个项目”来选择产品的属性和属性值。注意每个属性至少要选择两个值，否则这个属性会被忽略。

![](/assets/QQ截图20180327163721.png)

保存后，你可以点击产品窗体左上角的“变体价格”按钮，并为各属性和属性值进行定义和编辑，并可以附加价格属性。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsEB64.tmp.png)

#### 9.**  同一种产品，不同公司叫法不同的处理**

公司内部自己的叫法，就是产品窗体里的产品名称。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsCA39.tmp.png)

客户的叫法：报价单说明，在“备注”选项卡中设置。

供应商的叫法：供应商描述，在“备注”选项卡中设置。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsCA3A.tmp.png)

不同供应商的不同叫法：供应商产品名称供应商产品编码，为产品添加或编辑供应商时设置。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsCA5A.tmp.png)

#### 10.**  产品的作废和恢复**

通过菜单“库存→产品→产品”中，点击窗体右上角的“有效”按钮，可以切换到“无效”，再次点击，就切换回“有效”。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps2160.tmp.png)

在产品列表中，默认不显示“无效”的产品，如果你想显示它们来进行编辑（如：你想重新将其设置为“有效”），你可以在过滤器中点选“无效”，这样就可以显示“无效”的产品。

### 二.**仓库管理的常用操作**

#### **1.  查看库存估值**

要查看库存估值，有两种途径：

1 、通过菜单“库存→报告→库存计价”，

![](/assets/QQ截图20180327170205.png)

你可以点击库位或产品名称左侧的“![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps7BA5.tmp.jpg)”图标，将库位或产品按层级结构展开。

2 、在“仓库→报表→某日库存”中，你可以查看当天或特定日期的库存价值。

![](/assets/QQ截图20180327170242.png)

你需要勾选“某日库存”，并选择一个特定日期。

最后点击“检索库存价值”按钮。

注：可用库存

有两个重要的概念：

&gt;&gt;在手数量：当前在你仓存的产品实际数量。

&gt;&gt;预测数量：等于当前物理库存-预计出库数量+预计入库数量。

预测数量非常有用，因为它显示了销售员可以出售的数量。如果预测数量比在手数量多，意味着有些产品将入库。如果预测数量比在手数量少，意味着有些产品已被其它销售订单或者生产单预定。

通过菜单“库存→库存管理→产品”，切换到列表视图，可以看到所有产品的在手数量和预测数量。

![](/assets/QQ截图20180327170353.png)

为了获取更多未来库存的详情，你可以在产品窗体上部点击“预测”链接，

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps7C06.tmp.png)

来查看库存量预测。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps7C07.tmp.png)

#### **2.  库存盘点**

要进行库存盘点，使用菜单“库存→库存管理→库存调整”，点击”新建”按钮，

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps5E9F.tmp.png)

输入盘点表单号，选择盘点库位和要盘点的对象。点“保存”按钮后，点击“开始盘点”按钮，系统会列出

库存明细，你可以编辑、删除或通过单击“添加一行”来新增一个产品的盘点。

![](/assets/QQ截图20180327172701.png)

确认产品的计量单位和库位，输入实际数量。所有项目添加完成后，点击“保存”。确认无误后，点击“盘点生效”按钮。

你还可以先将盘点导出，修改产品数量后再导入，在列表视图中勾选要导出的盘点，从“动作”下拉菜单中选择导出，

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps5EB0.tmp.png)

选择要导出的字段，

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps5EB1.tmp.png)

#### **3.  按订单入库**

在采购流程中，Odoo 将自动产生入库单。新建并确认采购订单后，点击菜单“库存”，在“收货”一节，

你会看到已就绪的入库单数量。点击“入库”链接，

![](/assets/QQ截图20180328155536.png)

可以显示待入库的移库单列表。

![](/assets/QQ截图20180328155612.png)

点击要入库的移库单。

![](/assets/QQ截图20180328155634.png)

你可以点击“编辑”按钮，在“操作”选项卡的“完成”字段输入要入库的数量，“保存”后点击点击“确认”按钮。如果不编辑直接点击“确认”按钮，系统将默认处理所有产品。

如果你填写的产品数量少于订单数量，系统会出现提示：

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps66C8.tmp.png)

根据提示，你可以选择“创建后续分批出库单”或者“没有后续分批出库单”。

#### **5. 发货**

关于发货可以使用基于客户订单的自动发货流程，也可以人工实现。为了深入学习本节，你需要安装销售管理模块。

新建并确认销售订单后，如果进入产品列表视图，你会发现虚拟库存的值会减少，这是因为系统为你刚创建的订单保留了产品，你不能把它再卖给另外的客户。

点击菜单“库存→调度→运行调度”，点击“运行排程”按钮。“运行调度”将管理产品的预定，考虑内部优先、提前期以及承诺给客户的日期进行订单运算。

点击主菜单“仓库”，在“发货”一节，你会看到待处理的的发货单数量。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsDAEF.tmp.png)

点击“待处理”链接，

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsDB00.tmp.png)

你将可以找到有关你销售订单相关那一行，点击这行来看一下其详细内容：

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsDB01.tmp.png)

你可以点击“编辑”按钮，在“操作”选项卡的“完成”字段输入要发货的数量。最后点击“确认”按钮完成发货。如果你填写的产品数量少于订单数量，系统会出现提示：

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsDB12.tmp.png)

根据提示，你可以选择“创建后续分批出库单”或者“没有后续分批出库单”。

注：状态

Odoo 区分两种状态：需求确认和库存分配

当一个商品的需求被确认时，有可能仓库没有足够的库存。当仓库内的商品能满足这个需求时，系统将冻结这部分库存，已便为实现这个需求保留产品。

当你点击“保留”按钮时，如果仓库有足够的库存，待“出库方确认”状态将变为“可用”。

注：负库存

库存管理非常灵活而且有效。例如，如果你在产品入库时忘记输入，导致系统中没有足够的数量（而实际库存中有足够的数量），系统将阻止你把它们发给客户。这时你可以使用“强制可用”来人工允许这个出库操作，但在这种情况下，就存在负库存的风险。你应该监控你的负库存情况并且及时做库存修正。

### 三.**基本的物流配置**

在本节中，你将看到如何设置仓库管理以满足贵公司的需求。Odoo 通过设置能够处理许多不同的情况。

#### **1.  仓库库位**

在 Odoo 中仓库代表实物存放地点。一个仓库可以在多个层级上分割成多个库位。库位是仓库组成的最小单位，例如客户库位、生产工序库位。在Odoo中，你可以将库位设置成基于父子关系的树状结构。这样的组织方式给了你更丰富的库位层次划分和精细的仓库分级。

下面为系统中主要的库位类型：

&gt;&gt;物理库位。

物理库位表示实际的仓库及其层次关系。

&gt;&gt;业务伙伴库位。

业务伙伴库位包括客户库位和供应商库位。在与这些业务伙伴对账时，这些库位将扮演往来对账的角色。系统中“从供应商收到产品”，就是产品从供应商库位转移到自己的物理库位。由此可见，供应商库位的库存一般是负数。

&gt;&gt;虚拟库位，包括盘点库位、补货库位、生产库位和废品库位。

盘点库位是贵公司对库存进行盘盈和盘亏操作的对应库位。

生产库位是生产的对应方，被用在生产操作中。生产是消耗原材料，然后产出成品。“虚拟库位/生产”代表上述消耗原材料和产出成品两个操作的对应库位。

当 Odoo 安装后，仓库模块将初始化这些库位。先通过菜单“库存→配置→设置”，在“位置和仓库”一节中，点选“ 管理一个仓库，可以有多个物理库位。 ”或“ 管理多个仓库， 每个仓库一个有多个物理库位”。

![](/assets/QQ截图20180328165217.png)

应用后，就可以通过“库存→配置→仓库管理→位置”，如下图：

![](/assets/QQ截图20180328165447.png)

整个仓库管理都是建立在库位概念上的。库位是仓库分层结构中的一部分，它允许你构建虚拟库位，比如生产类型，这样就能更好的进行分析。

单击“新建”按钮可定义一个新的库位。

![](/assets/QQ截图20180328165517.png)

你需要给库位输入一个名字，选择“位置类型”，并为其选择上级库位。

#### 2.**  库位类型**

库位必须是以下几种类型之一：

&gt;&gt;视图：虚拟库位，用于攘括子库位。

&gt;&gt;客户位置：销售出库的目标库位。

&gt;&gt;供应商位置：采购入库的源库位。

&gt;&gt;内部位置：通常是真实的存放货物的库位。

&gt;&gt;盘点：用于修正库存数量，是盘盈盘亏的库位，库存盘点时，盘盈的话，相当于从盘点库位移动到公司库位，盘亏的话相当于从公司库位移动到盘点库位。

&gt;&gt;生产：生产操作的对应方，用于接收原材料和发送最终成品。

&gt;&gt;补货：当你不知道补货来源（供应商或生产）时作为补货操作的对应方。当“计划运行”完成后，该库位的产品数量应该为零。

&gt;&gt;转移位置：公司间移动，在多公司的环境中使用作为中间库位。

![](/assets/QQ截图20180328165856.png)

在“产品”窗体的“库存”选项卡中，你可以定义产品的库存属性。

![](/assets/QQ截图20180328170332.png)

在业务伙伴窗体的“销售与采购”选项卡中，你可以定义其“客户库位”和“供应商库位”属性。

![](/assets/QQ截图20180328170349.png)

#### **3.  库位地址**

你可以为每个客户或供应商创建库位，并把库位地址设置成客户或供应商的地址。然后在 Odoo 中设置客户或供应商使用这个库位，而不是业务伙伴的默认库位，这样Odoo就会使用这个库位为业务伙伴准备收货或发货。

注：委外加工

在生产一节中，你可以将库位赋给一个工作中心，如果这个库位是供应商的，你必须给它一个地址，这样 Odoo 将为供应商准备发货单和从供应商接收生产完成的产品。为供应商创建库位，也是管理寄售库存的简单解决方案。

注：寄售库存

寄售库存是物品属于你所有（产权在你的帐户里），但实物放在你的供应商那里。或反过来说，你的客户的产品（产权不是你的），但存放在你的公司。你必须创建寄售库位作为你内部库存的一部分。为了让你轻松地在更高层次上整合资源，库位定义是分层的。这种结构是在“上级库位”字段规定的。这使你能够管理复杂情况下产品的定位。例如，你能想象以下的情景：

Odoo 中文社区有两个仓库，一个仓库在上海，另一个在北京。对于一些订单，一部分产品你必须从上海仓库发货，另一部分部品你必须从北京仓库发货。但你可以指定一个虚拟的仓库， 以便于Odoo进行核算，从而决定它应该从上海或从北京提供产品。

为了在 Odoo 中完成这项工作，你应该创建库位“中国”用来联系上海和北京的库位。你可以创建下面的物理库位：

Odoo 中文社区仓库

---出库库位

------中国库位

----------上海库位

----------北京库位

Odoo 将从包含订购产品的仓库中发送货物。当产品在多个仓库都有库存时，Odoo会选择最近的仓库。为了让Odoo能搜索到最近的仓库，你应该标明不同仓库的地理坐标（X，Y，Z）。

这个坐标在同一个仓库的库位中可用于标识通道、货架和层。

### 四.**深入理解仓库的内部移动**

内部移动不仅是库存变化的基本操作，也可以组成库存移动流并定义分拣。库存移动流不仅对采用按库存补货（MTS）的产品有效（送货操作等待特定的入库操作完成），也可以用于其它仓库再补货的出、入库的多步操作。下面我们学习如何应用推式流和拉式流来创建这样的库存移动流。

当你为仓库人工创建了一个内部移动的时候，系统将创建一个分拣，并且通过指定相应的产品和数量来创建移动。当你确认一个销售订单时，Odoo 将首先创建不需要分拣的移动，然后，它们将被指定到已存在的分拣或创建一个分拣。

为了指定移动给一个分拣，Odoo 将检查这个移动是否指定给了一个分拣类型（例如，Odoo中文社区：发货单）。如果找到了这个移动指定的分拣类型，它将查找一个分拣来指定给此移动。这个分拣应有和这个移动对应的状态、分拣类型、补货组（相关的补货集合，如属于同一销售订单）、源库位和目标库位。如果没有找到对应的分拣，Odoo将创建一个新的分拣。

当一些产品必须要到包装库位打包，而另外的产品不需要的时候，这种内部移动机制提供了更多的灵活性。这样，把销售订单里涉及到打包的内部移动分到打包组，那些直接的内部移动将被分组到一个独立的分拣。对于发货单，只需要一个分拣就可以包括所有产品。

分拣的定义几乎取决于其包括的内部移动。分拣的状态取决于内部移动和分拣类型、内部移动的源库位和目标库位。通过库存移动需要的最小日期计算出计划日期。

分拣的状态主要取决于它的内部移动：

&gt;&gt;如果有一个移动处于草稿状态，那么这个分拣就处于草稿状态

&gt;&gt;如果分拣包含的所有的移动是完成或取消状态，那么这个分拣也为完成或取消状态。

其它状态还取决于移动类型。移动类型决定了客户希望一次获得所有产品（一次完成）还是期望产品以最快的速度到达它那里（允许分批发货）。这个移动类型可以手工定义，或是来自于属于一个补货组的销售订单。

对于分批发货，就存在一个特殊的状态：部分可用。一个处于确认或等待状态的移动，可能有一些库存可以被保留。在这种情况下，分拣将不是确认或等待状态，而是部分可用状态，这样就允许产品被部分发货。当一些移动被指定产品而其它移动没有库存可供保留时，一个分拣也被标记为部分可用。

一个移动可能不属于一个分拣类型。这意味着它不能被指定给一个分拣。比如库存盘点时的盘盈盘亏或生产的进出移动。

为了满足复杂的仓库管理环境，你需要通过菜单“库存→设置→设置”勾选“库位和仓库”一节的“使用规则的产品高级路线”。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps33C.tmp.png)

下面将介绍用于创建路线的推式流或补货规则（拉式流）。

#### **1.  推式流**

在 Odoo 中，库位之间可以进行连接来确定产品的流转路径。推式流定义了一个库位怎么与另一个库位相关联，包括相关的参数。当给定数量的产品移至源库位时，一个库位移动动作将自动按照设置的流程参数执行（目的库位、延期时间、货运类型、科目等）。根据参数的定义，这个新的移动动作可以自动完成或手工确认。

当产品到达一个库位的时候，Odoo 能够自动建议将产品移动到其相关的库位，系统提供了三种内部调拨类型：

&gt;&gt;自动调拨

&gt;&gt;手动操作自动，但不增加

自动调拨模式将在不等待用户确认情况下自动执行移动操作。产品将自动发送到相关的库存位而不产生任何内部的手动操作。相对应的情况下，简单来说，就是用户免去过程中的手动步骤，设置自动操作移动过程。

手动操作模式将在产品抵达库位的时候自动创建一个移动到相关库位的内部移动单。在物料真正移动前，这个移动单需要操作人员确认。“自动，但不增加”操作模式没有相关库存位置移动,但是会将产品直接改变目的地，分配到相关的库存位置，你可以设置一个产品到达仓库时的目标库位。仓库管理员可以更改收货信息。

有些内部调拨操作在实际执行前需一个特定的时间。为了考虑这个提前期，你需要在字段“延迟”中设定一个天数。原始移动发生后，额外的产品移动将在设定的天数后执行（自动或者手动），如果你采用的是“自动，但不增加”操作，这个提前时间将自动插入初始订单交付时间之后。通过这种方法，你可以在仓库库存控制点设置安全的提前期。

推式流的一个典型应用：假设当原材料到达收货库位时，为了保证货品质量，它首先要搬去质检库位做质量检查。

为实现这个需求，使用菜单“库存→设置→路线”，点击“新建”按钮，来创建名称为“卸货--&gt;质检--&gt;

入库”的路线，注意在“适用于”一节勾选仓库，并选择相关的仓库。

![](/assets/QQ截图20180329114650.png)

在推式流一节，点击“添加一个项目”，然后进行如下图的配置，

![](/assets/QQ截图20180329143744.png)

“保存并关闭”此推式流，最后“保存”此路线。

#### **2.  补货规则（拉式流）**

拉式流跟推式流不同，拉式流操作的是需求，而不是直接的产品。它不处理产品的移动，而是处理需求和补货单。推式流应用于移动的目标库位，而拉式流应用于移动的源库位。

当一个库存移动被确认，而它的补货方法被设为“高级：应用补货规则”时， 为了实现这个移动，它将在源库位创建一个补货。为了满足这个补货，在这个补货上需要创建一个补货规则。补货规则有多个产生不同结果的补货类型:从另一个库位移动产品至源库位、采购产品到源库位、生产产品到源库位。

补货单不需要被库存移动创建。用户可人工创建补货单，或者当我们确认了一个销售订单后，Odoo 将在客

户库位为每一个销售订单行创建补货单。事实上，这个补货系统、库存移动和补货规则在整个 Odoo 中都得到了广泛使用。即便在最简单的仓库设置中，当我们运行从销售订单产生的补货单时，这些补货规则将产生发货单。

在正常状态下，补货单将依次通过下列状态：:

&gt;&gt;确认:补货单创建后被人工确认。

&gt;&gt;运行:一个补货规则被成功应用（比如创建了一个移动、询价单或一个生产单）

&gt;&gt;完成:补货规则被应用并且产品被移动到了补货库位。

当仓库移动没有找到补货规则或不可能应用补货规则（如产品未定义供应商）时将出现补货异常。当产品不再需要时，你可以取消补货。

如果安装了“procurement\_jit”模块，当补货被确认时，系统将立即检查补货。如果导致了性能问题，你可以卸载此模块。这样系统将仅仅立即运行由销售订单产生的补货（其结果是产生发货单），但发货单的库存移动产生的补货将不马上运行，而是按“计划运行”中设置的运行频次来进行。

相对于推式流，拉式流享有较高的优先级，当一个规则从拉式流被创建后，推式流将不能再被应用。

例如：对于按订单补货的产品，当销售订单确认后，产品就需要“库存库位→客户库位”的发货操作，对于“库存库位”，就需要通过拉式流从质检库位来进行补货，以满足这个销售订单的发货要求。为此，应用到此产品的的路线中的补货规则（拉式流）设置如下：

![](/assets/QQ截图20180329150215.png)

#### **3.  补货规则的供货方式**

在补货规则窗体中，调拨的供应方式有两种：

默认：从库存获取

高级：应用补货规则

一个确认的库存调拨要在源库位产生补货单并且应用补货规则，其供货方式必须为“创建补货单”。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps3EA1.tmp.png)

如果调拨的供货方式为“从库存取货”。这意味着它不在调拨的源库位上创建补货单，而是尝试在源库位的可用库存中找到产品。

如果用户选择供货方法为“创建补货单”，就会在源库位创建一个补货单。例如，对于靠采购补货的产品，创建一个发货单将导致创建一个采购单。

供货方法仅适用于内部或外部分拣。将要到货的产品不需要保留库存，所以他们总是“从库存取货”。

两个以上的移动如何创建移动链呢？当一个补货规则创建另外一个移动时，它将决定新移动的供货方法。也就是说，它能决定新的移动是“创建补货单”还是“从库存取货”。这样就可以创建一个长的移动链。例如,一个采用库存补货和“分拣→打包→发货”的产品，其移动将从一个销售订单的确认开始。首先创建一个补货单，创建一个供应方式为“创建补货单”的发货库位到客户库位的移动；然后又在发货库位创建一个补货单；照此继续直至打包库位创建了一个供应方式为“从库存取货”的库存移动。

比如：如果在仓库中选择了“分拣＋包装＋发货”的发货模式，就会创建“分拣＋打包＋发货”的路线，在此路线中，包括了从发货库位到库存库位的补货规则移动链。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wps3EA2.tmp.png)

#### 4.**  移动链和状态**

推式流和补货规则允许创建一个长的移动链。当我们谈论移动链的时候，我们区分移动的因素为：

&gt;&gt;目标移动:在移动链中的下一个移动，它从当前移动的目标库位开始。

&gt;&gt;初始移动:移动链中要到达源库位的移动。

当一个移动有初始移动时，它仅可以保留经过初始移动的库存。这就是为什么这些移动的状态为“等待其它的移动”，而不是等待可用。一个移动仅可以有一个目标库位，但是可以有多个初始移动。

如果移动是拆分的，则这个拆分后的移动自身将没有初始移动。但是它将查找是否有拆分前的移动的初始移动，并且可成为“等待其它移动完成”的状态。

#### **5 . 复杂的物流**

现在我们讨论何时应用补货规则和如何设置它们。

很多仓库有收货库位和出库库位，或者有一个打包库位（在那里对客户的产品进行重新打包），这个会变得很复杂。为了更好的管理它们，在应用到产品、产品分类、仓库等之前，我们把补货规则、推式流分组为路线。

你只需要在产品或产品分类窗体中选择它们就可以使用路线，但是使用它们要稍微困难一些。这就是为什么在创建新仓库的时候，Odoo 会自动创建需要的路线。

在实际使用中，你可能需要优化这个基本的配置。

路线是推式流和补货规则的集合。路线可以应用于:

&gt;&gt;产品

&gt;&gt;产品分类

&gt;&gt;仓库

&gt;&gt;销售订单行 \(通过菜单“销售→设置→设置”，在“订单路线”一节，勾选“允许在销售订单行上选择一个路线（高级）”来激活此功能\)

在路线窗体中，你可以通过勾选“适用于”一节中的对象来决定是否允许用户在上述对象中选择它。

![](/assets/QQ截图20180329151703.png)

例如：如果对于路线“卸货→质检→入库”，在“适用于”一节你勾选了 “产品”，则在产品窗体的“库存”选项卡的 “路线”一节中你可以通过勾选来决定是否应用这个“卸货→质检→入库”路线。

![](/assets/QQ截图20180329151840.png)

### 五.**仓库**

仓库为成品和原材料提供存放位置。当你从供应商处购买产品时，你只会考虑到用仓库接收货物。这也使得终端用户不需要使用库位列表，只需要一个实际的仓库。

使用菜单“库存→配置→仓库管理→仓库”，然后点击”新建”按钮新建一个仓库。

![](/assets/QQ截图20180402154215.png)

一个仓库至少需要定义三个项目：

仓库名称：显示在用户操作窗体的仓库名称。

缩写名称：用于系统内部表示这个仓库的名称缩写，系统将按此名称新建一个类型为“视图”的库位，用于表示此仓库。

提供补给的默认仓库：货物将总是默认从这个仓库补货。

“库存”库位：提供产品交付给客户的库位。所有产品的交付都可以由这个库位和它的任何子库位提供。在新建仓库时，系统将自动创建用仓库缩写名称为名的库位（其类型为视图，是库存库位的上级库位）和“库存”库位。

在新建仓库时，根据你入库和发货的选项，其它所需库位也由系统自动创建。一旦建立了新的仓库，你就会用到下面的定义：

&gt;&gt;最小库存规则

&gt;&gt;采购单

&gt;&gt;销售订单（使用定义的销售点，这个销售点和一个仓库关联）

#### **1. 仓库设置**

在仓库窗体的仓库设置选项卡中，你可以勾选你需要的入库和出库设置：

![](/assets/QQ截图20180402154215.png)

仓库的“收货”设置：

&gt;&gt;直接接收货物到库存库位（1个接收步骤）

&gt;&gt;在卸货库位卸货，然后去库存库位（2个接收步骤）

&gt;&gt;在卸货库位卸货，在进入到库存库位前先到质检库位进行质量检验\(3个接收步骤\)

仓库的“发货”设置：

&gt;&gt;从库存库位直接出库（直接发货）。

&gt;&gt;产品先转到发货库位，然后再出库（分拣+发货）

&gt;&gt;产品先转到打包库位进行打包，然后再转到发货库位进行出库（分拣+打包+发货）。

当你勾选收货和发货选项后，系统将自动创建所需的库位、分拣类型来支持你的选择。入库和出库路线被打包成此仓库的路线。所以，当你选择了这个仓库，它将默认选择了仓库的路线。入库路线将同时拥有相关的推式流。

同时“越库”也被作为一个路线增加到此仓库，用于在到货后不入库直接发货给客户的情况（适用于按订单补货的产品）。

### 6.**主生产计划**

主生产计划（Master Production Schedule），简称为MPS：预测材料的进和出。它是基于预期输入和输出的物流管理。

注：MPS,补货和生产

Odoo 区分生产、采购和补货。

生产是制造，采购是从另一方收购货物，补货是任何一个或这两个都是。因此可能 MPS 理解为主补货计划更为贴切。 这就是Odoo所做的！

### 7.**批次和可追溯性**

Odoo 使用复式记账管理，可以提供非常先进的追溯性信息，你可以非常方便的查询到所有的库存操作的历史记录。

注：上游和下游的可追溯性

上游可追溯性是从供应商收货一直到把成品按照订单交付给客户。（注意：这个名称让人困惑-让人觉得这是个下游的定义，可以理解为原材料使用方向）

下游可追溯性是在不同的方向上跟踪产品，从客户到不同的原材料供应商。（注意：这个名称让人困惑-让人觉得这是个上游的定义，可以理解为原材料供应方向）

#### **1.  库存移动**

在产品窗体中，点击窗体上部的“可追溯性”快捷方式，可以跟踪此产品的库存移动情况，包括入库单、出库单、调拨单等。

![](/assets/QQ截图20180402160622.png)

每一个库存移动都会有一个给定的状态，下面为可能存在的状态：

&gt;&gt;新建：调拨到目前为止在系统中没有生效，移动也还没有完成。

&gt;&gt;确认：这个移动将被生效，它将会被记录到虚拟库存中，但是你不用知道这个操作是否将被完成，因为系统需要为这次移动预留产品。

&gt;&gt;等待可用：表示调拨等待另一个操作的结束。

&gt;&gt;可用：移动将完成并为这次事物保留必须的原材料

&gt;&gt;完成：库存调拨已经完成，并已经计算为真正的调拨。

&gt;&gt;取消：调拨操作被撤消，因此没有移动真实的库存或虚拟的库存。

#### **2.  批次管理**

Odoo 也能管理产品批次。系统定义了两种批次类型：

生产批次（批号）代表一个唯一的产品或同一生产区域的相同产品。它们通常被打在产品上的条形码所识别。批次号还可标记上供应商编号或者你自己公司的编号。

跟踪编号是逻辑批次，用于识别存放一组产品的包装容器。例如，给托盘中储存的产品编上各自的编号。

批次数据可以用在所有的库存移动上，尤其是入库、内部移动和发货。

要在 Odoo 上使用批次管理，首先通过菜单“库存→配置→设置”，在“可追溯性”一节，点选“ 跟踪批次或序列号 ”和“ 记录打包使用的包装：托盘、箱、...”

![](/assets/QQ截图20180402160817.png)

然后通过菜单“库存→产品→产品”，选择要设置批次号的产品，在产品窗体的“库存”选项卡的“跟踪”

一节勾选跟踪的类型（按唯一的序列号、按批次、无追溯）。

![](/assets/QQ截图20180402160904.png)

然后你就可以在产品移动时通过点击“![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsD68F.tmp.jpg)”，

![](/assets/QQ截图20180402161223.png)

来选择或新建批次。

![](/assets/QQ截图20180402161340.png)

在操作中输入序列号时，你可以使用现有的序列号或创建一个新的。一个生产批次号用于一种产品，跟踪序列号可以为不同的产品使用多次。所以你可以在一个托盘或者一个容器中放置不同的产品。

#### **3.  可追溯性**

使用菜单“库存→库存管理→批次/批次号码，你可以选定序列号进行追溯。

![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml\wpsD6B1.tmp.png)

